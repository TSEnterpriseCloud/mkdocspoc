
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Syncronize your data using Polling" name="description"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.42" name="generator"/>
<title>Syncronization using Polling - TeamSystem Enterprise Cloud</title>
<link href="../../assets/stylesheets/main.0253249f.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="/static/css/custom.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#lets-start">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="TeamSystem Enterprise Cloud" class="md-header__button md-logo" data-md-component="logo" href="../.." title="TeamSystem Enterprise Cloud">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            TeamSystem Enterprise Cloud
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Syncronization using Polling
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="TeamSystem Enterprise Cloud" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="TeamSystem Enterprise Cloud">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    TeamSystem Enterprise Cloud
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../started/getting-started/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../started/authentication/">
<span class="md-ellipsis">
    Authentication
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../started/howto/">
<span class="md-ellipsis">
    How to
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Step by step guide
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Step by step guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/common-terms/">
<span class="md-ellipsis">
    Common Terms
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/company-scoped-methods/">
<span class="md-ellipsis">
    Company methods
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/manual-authentication/">
<span class="md-ellipsis">
    Authentication mode
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Quickstarts
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Quickstarts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/postman-collection/">
<span class="md-ellipsis">
    Postaman Collections
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/csharp-sdk-quickstart/">
<span class="md-ellipsis">
    C# SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/go-sdk-quickstart/">
<span class="md-ellipsis">
    GO SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/java-sdk-quickstart/">
<span class="md-ellipsis">
    Java SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/javascript-sdk-quickstart.md">
<span class="md-ellipsis">
    JavaScript SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/php-sdk-quickstart/">
<span class="md-ellipsis">
    PHP SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/python-sdk-quickstart/">
<span class="md-ellipsis">
    Python SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/ruby-sdk-quickstart/">
<span class="md-ellipsis">
    Ruby SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/typescript-sdk-quickstart.md">
<span class="md-ellipsis">
    TypeScript SDK Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/vanilla-code/">
<span class="md-ellipsis">
    Vanilla Code Sample
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/windows-form-quickstart/">
<span class="md-ellipsis">
    Windows Form Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/powerquery-quickstart.md">
<span class="md-ellipsis">
    Excel Power Query Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/apps-script-quickstart.md">
<span class="md-ellipsis">
    Google Sheets Apps Script Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stepbystep/quickstarts/zapier-quickstart/">
<span class="md-ellipsis">
    Zapier Quickstart
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Supported scenarios
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Supported scenarios
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../e-invoice-xml-customisation/">
<span class="md-ellipsis">
    E-Invoice XML Customisation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Basics
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Basics
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/scopes/">
<span class="md-ellipsis">
    Scopes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/errors/">
<span class="md-ellipsis">
    Errors
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/limits-and-quotas/">
<span class="md-ellipsis">
    Limits adn Quotas
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
<span class="md-ellipsis">
    Additional capabilities
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
            Additional capabilities
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/additional-capabilities/sort-results/">
<span class="md-ellipsis">
    Sort Results
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/additional-capabilities/paginate-results/">
<span class="md-ellipsis">
    Paginate results
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/additional-capabilities/customize-response/">
<span class="md-ellipsis">
    Customize response
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/additional-capabilities/filter-results/">
<span class="md-ellipsis">
    Filter results
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basics/debug-your-integration/">
<span class="md-ellipsis">
    Debug your integration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Api Reference
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Api Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/api-reference-co/">
<span class="md-ellipsis">
    Common api
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/api-reference-fi/">
<span class="md-ellipsis">
    Finance api
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/api-reference-mg/">
<span class="md-ellipsis">
    Warehouse api
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/api-reference/">
<span class="md-ellipsis">
    Use the API Reference
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    SDKs
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            SDKs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../sdks/typescript-sdk/index.md">
<span class="md-ellipsis">
    TypeScript SDK
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sdks/java-sdk/index.md">
<span class="md-ellipsis">
    Java SDK
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sdks/javascript-sdk/index.md">
<span class="md-ellipsis">
    JavaScript SDK
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sdks/net-sdk/index.md">
<span class="md-ellipsis">
    .NET SDK
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sdks/python-sdk/index.md">
<span class="md-ellipsis">
    Python SDK
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sdks/ruby-sdk/index.md">
<span class="md-ellipsis">
    Ruby SDK
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Support &amp; Feature Request
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Support &amp; Feature Request
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/faqs.md">
<span class="md-ellipsis">
    FAQs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/general-knowledge.md">
<span class="md-ellipsis">
    General Knowledge
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    Legal
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            Legal
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../legal/terms/">
<span class="md-ellipsis">
    Condizioni generali di utilizzo delle API MadBit
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../legal/policy-acceptable-use/">
<span class="md-ellipsis">
    Policy di Acceptable Use
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../legal/marketing-resources-and-identity-guidelines/">
<span class="md-ellipsis">
    Marketing Resources and Identity Guidelines
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#lets-start">
<span class="md-ellipsis">
        Let's start!
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#libraries">
<span class="md-ellipsis">
        Libraries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#initialize-our-sdk">
<span class="md-ellipsis">
        Initialize our SDK
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implement-the-exponential-backoff">
<span class="md-ellipsis">
        Implement the Exponential Backoff
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-api-method">
<span class="md-ellipsis">
        The API Method
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manage-the-response">
<span class="md-ellipsis">
        Manage the response
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-examples">
<span class="md-ellipsis">
        Code Examples
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#additional-resources">
<span class="md-ellipsis">
        Additional resources
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>Syncronization using Polling</h1>
<p>import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";</p>
<p>In this use case, we suppose that you have a system that you want to <em>keep in sync with the TSE in Cloud API</em>, in particular <strong>retrieving the list of the products</strong> from our API and storing them in some way. In this example, we'll adopt a <strong>polling</strong> approach to retrieve the current state of the data stored in TSE in Cloud.</p>
<p>If you want to download the complete SDKs examples you can find them <a href="https://github.com/fattureincloud/fattureincloud-quickstarts/tree/master/polling">here</a>.</p>
<p>:::tip Retrieve your Company ID!</p>
<p>In this example, we'll suppose you have to manage just one Company, so we simply inserted its ID directly in the code. If instead, you need to be able to manage multiple companies, you'll need to retrieve the ID of the current company in some way.
Check the <a href="/basics/company-scoped-methods.mdx">Company-scoped Methods</a> page for more info.</p>
<p>:::</p>
<p>:::danger Are you sure?</p>
<p>A better approach is to use our <a href="/webhooks/index.mdx">Webhooks</a> to keep your system updated. Check them out!</p>
<p>:::</p>
<h2 id="lets-start"><img alt="🏈" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/1f3c8.png" title=":football:"/>  Let's start!</h2>
<p>To keep the code as simple as possible, we decided to write the data to a <a href="https://jsonlines.org/">JSON lines</a> file, that could be then sent as input for an external system; of course, it is possible to use the retrieved elements as needed: for example, to update a Database status or to perform API calls towards a third-party system.</p>
<p>:::warning Schedule the execution!</p>
<p>To keep two systems in sync using polling, it is necessary to reiterate the extraction of the data from our APIs, <a href="https://en.wikipedia.org/wiki/Cron">scheduling</a> the code execution.</p>
<p>In this example, we <em>deliberately</em> omitted to add the code to repeat the execution of our code. For example, you could decide to add a <strong>Cron Library</strong> to your application or to execute the script using a <strong>Job Scheduler</strong> on your operating system. <strong>This is up to you</strong>.</p>
<p>:::</p>
<p>:::info Or execute it once...</p>
<p>Even if we created this code to keep two systems synchronized periodically, it can also be used for a one-off extraction of the data from the TSE in Cloud API. Just execute it as it is...</p>
<p>:::</p>
<h2 id="libraries"><img alt="🏗️" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/1f3d7.png" title=":building_construction:"/>  Libraries</h2>
<p>In our examples, we'll use the <strong>TSE in Cloud SDKs</strong>; of course, you can just replace our SDKs with a simple HTTP Client if you prefer: check the <a href="/sdks/index.mdx">dedicated page</a> for further info.
Additionally, for some languages, we added some other libraries to perform common tasks such as writing to the file system or performing the exponential backoff.</p>
<h2 id="initialize-our-sdk"><img alt="1️⃣" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/0031-20e3.png" title=":one:"/>  Initialize our SDK</h2>
<p>In the first part of this example, we import our SDK and initialize it, using the Access Token requested to perform the API call. For simplicity, we didn't implement the code to retrieve the access token in these examples, but you can find more information in the <a href="/quickstarts/index.mdx">Quickstarts</a> or in the <a href="/authentication/index.mdx">Authentication Implementation</a> pages.</p>
<p>Since we're trying to collect the list of products for a certain company, the <strong>products:r</strong> <a href="/basics/scopes.md">scope</a> will be required; if you need to use another API method please select the appropriate scopes.</p>
<p>Once the token is provided to our SDK, it is possible to start using it to interrogate our APIs.</p>
<h2 id="implement-the-exponential-backoff"><img alt="2️⃣" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/0032-20e3.png" title=":two:"/>  Implement the Exponential Backoff</h2>
<p>The <strong>polling strategy</strong> implies the exigency to perform a potentially huge amount of requests in a really short period. As explained <a href="/basics/limits-and-quotas.mdx">here</a>, our APIs are protected by a set of limits that could result in an error if too many requests are performed in a certain interval.</p>
<p>This is why in our examples we wrapped the API call with an <a href="https://en.wikipedia.org/wiki/Exponential_backoff">Exponential Backoff</a> method: it manages retries and time distance between two consecutive attempts, to avoid your script failing for a temporary quota-related issue.</p>
<h2 id="the-api-method"><img alt="3️⃣" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/0033-20e3.png" title=":three:"/>  The API Method</h2>
<p>The API method that we're using is the <a href="/api-reference#get-/c/-company_id-/products">List Products</a> method, which returns the list of all the possible products for a certain company.
The <em>List</em> methods provide <a href="/basics/additional-capabilities/sort-results.mdx">Sorting</a> and <a href="/basics/additional-capabilities/customize-response.mdx">Customizing</a> functionalities, but in this example we'll not use them.</p>
<p>Each response of the List methods will be <a href="/basics/additional-capabilities/paginate-results.mdx">Paginated</a>: to avoid returning enormous amounts of data with a single call, the list of products will be split into different pages, that can be retrieved consecutively. Each response contains a set of dedicated pagination parameters, that are meant to make the pages navigation task easier for you.</p>
<p>In our code, we'll perform the first List request on the first page provided by our API, with a page size of five elements. Then we'll use the pagination parameter <em>last_page</em> to retrieve the subsequent pages, performing the needed number of API calls to export all the needed elements from the APIs.</p>
<p>:::danger Be aware of the index!</p>
<p>Please, notice that the pages on our APIs use <em>one-based numbering</em>: the first page has index 1.</p>
<p>:::</p>
<h2 id="manage-the-response"><img alt="4️⃣" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/0034-20e3.png" title=":four:"/>  Manage the response</h2>
<p>Each response contains a <em>data</em> parameter, that is a JSON array representing one page (e.g. one subset of the list of products). Our SDKs parse the JSON array, so you can just use the elements contained in the array to perform the requested operations.</p>
<p>In this example, we're just trying to populate a JSON Lines file, so for each product retrieved we obtain the related JSON representation and append it to the text file.</p>
<h2 id="code-examples"><img alt="💻" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/1f4bb.png" title=":computer:"/>  Code Examples</h2>
<p>Here you can find the code described above.</p>
<pre><code class="language-cs">// The following dependencies are required
// dotnet add package It.FattureInCloud.Sdk
// dotnet add package Polly
// dotnet add package Polly.Contrib.WaitAndRetry

using System;
using System.IO;
using System.Linq;
using Newtonsoft.Json;
using System.Collections.Generic;
using Polly;
using It.FattureInCloud.Sdk.Api;
using It.FattureInCloud.Sdk.Model;
using It.FattureInCloud.Sdk.Client;
using Polly.Contrib.WaitAndRetry;

namespace poll
{
    class Program
    {
        public static ProductsApi apiInstance;

        static void Main(string[] args)
        {
            // This code should be executed periodically using a cron library or job scheduler.
            // For example: https://www.quartz-scheduler.net/
            SyncProducts();
        }

        private static void SyncProducts()
        {
            // Here we init the TSE in Cloud SDK
            // The Access Token is retrieved using the "GetToken" method
            Configuration config = new Configuration();
            config.AccessToken = GetToken();

            // In this example we're using the Products API
            apiInstance = new ProductsApi(config);

            // The ID of the controlled company.
            var companyId = 2;

            // Here we setup the exponential backoff config
            var maxRetryAttempts = 5;
            var pauseBetweenFailures =
                Backoff.ExponentialBackoff(TimeSpan.FromSeconds(2), retryCount: maxRetryAttempts);

            var retryPolicy = Policy
                .WaitAndRetry(pauseBetweenFailures);

            try
            {
                // In this example we suppose to export the data to a JSON Lines file.
                // First, we cancel the content of the destination file
                File.WriteAllText("products.jsonl", String.Empty);

                // List Products
                var perPage = 5;

                // We perform the first request
                ListProductsResponse result =
                    ListProductsWithBackoff(companyId, 1, perPage, retryPolicy, apiInstance);
                // We use the first response to extract the last page index
                var lastPage = result.LastPage;
                // We append the products obtained with the first request top the output file
                // Data contains an array of products
                AppendProductsToFile(result.Data);

                // For the missing pages (we already requested the first one)
                for (var i = 2; i &lt;= lastPage; i++)
                {
                    // We require the page to the API
                    result = ListProductsWithBackoff(companyId, i, perPage, retryPolicy, apiInstance);
                    // And append all the retrieved products
                    AppendProductsToFile(result.Data);
                }
            }
            catch (ApiException ex)
            {
                Console.WriteLine("Exception when calling ProductsAPI.ListProducts: " + ex.Message);
                Console.WriteLine("Status Code: " + ex.ErrorCode);
                Console.WriteLine(ex.StackTrace);
            }
        }

        // In this function we append the products in the JSON Lines file.
        // You can replace this function to perform the operations you need.
        // For example, you can build SQL queries or call a third-party API using the retrieved products.
        {
            StreamWriter sw = File.AppendText("products.jsonl");
            // For each product in the list
            foreach (Product p in products)
            {
                // We write the product to the file
                sw.WriteLine(JsonConvert.SerializeObject(p, Formatting.None) + "\n");
            }
            sw.Close();
        }

        // Here we wrap the SDK method with an exponential backoff
        // This is to manage the quota exceeded issue
        private static ListProductsResponse ListProductsWithBackoff(int companyId, int currentPage, int perPage, Policy retryPolicy, ProductsApi apiInstance)
        {
            return retryPolicy.Execute(() =&gt;
            {
                // The actual SDK method is executed here
                return apiInstance.ListProducts(companyId, null, "detailed", null, currentPage, 5);
            });
        }

        // This is just a mock: this function should contain the code to retrieve the Access Token
        private static string GetToken() {
            return "YOUR_TOKEN";
        }
    }
}
</code></pre>
<pre><code class="language-go">// The following dependencies is required
// go get github.com/fattureincloud/fattureincloud-go-sdk/
// go get github.com/cenkalti/backoff/v4

package main

import (
    "context"
    "encoding/json"
    "fmt"
    "os"

    backoff "github.com/cenkalti/backoff/v4"
    fattureincloudapi "github.com/fattureincloud/fattureincloud-go-sdk/v2/api"
    fattureincloud "github.com/fattureincloud/fattureincloud-go-sdk/v2/model"
)

var (
    f, _ = os.OpenFile("products.jsonl", os.O_APPEND|os.O_WRONLY, 0644)
    // The Access Token is retrieved using the "getToken" method
    auth          = context.WithValue(context.Background(), fattureincloudapi.ContextAccessToken, getToken())
    configuration = fattureincloudapi.NewConfiguration()
    apiClient     = fattureincloudapi.NewAPIClient(configuration)
    companyId     = int32(16) // This is the ID of the company we're working on
    // Here we define the parameters for the first request.
    nextPage = 1
    attempts = 0
)

func main() {
    // This code should be executed periodically using a cron library or job scheduler.
    syncProducts()
}

func syncProducts() {
    // In this example we suppose to export the data to a JSON Lines file.
    // First, we cancel the content of the destination file
    f.Truncate(0)
    // Here we define the operation that retrieves the products
    operation := func() error {
        attempts++
        fmt.Printf("Attempt: %d\n", attempts)
        // In this example we're using the Products API
        // Here we execute the actual SDK method
        resp, _, err := apiClient.ProductsAPI.ListProducts(auth, companyId).Page(int32(nextPage)).PerPage(5).Execute()
        if resp != nil {
            // We check if there are other pages to retrieve
            if resp.NextPageUrl.Get() == nil {
                nextPage = 0
            } else {
                nextPage++
            }
            // We write the products of this page to the file
            // "data" contains an array of products
            appendProductsToFile(resp.Data)
        }
        return err
    }
    // For all the pages
    for nextPage != 0 {
        attempts = 0
        // We call the operation function using Exponential Backoff
        err := backoff.Retry(operation, backoff.NewExponentialBackOff())
        if err != nil {
            fmt.Fprintf(os.Stderr, "Error %v\n", err)
            return
        }
    }
    f.Close()
    fmt.Println("products succesfully retrieved and saved in ./products.jsonl")
}

// In this function we append the products in the JSON Lines file.
// You can replace this function to perform the operations you need.
// For example, you can build SQL queries or call a third-party API using the retrieved products.
func appendProductsToFile(products []fattureincloud.Product) {
    // For each product in the array
    for _, element := range products {
        // We obtain the related JSON and append it to the file as single line
        jsonStr, _ := json.Marshal(element)
        f.WriteString(string(jsonStr) + "\n")
    }
}

// This is just a mock: this function should contain the code to retrieve the Access Token
func getToken() string {
    return "YOUR_TOKEN"
}
</code></pre>
<pre><code class="language-java">import com.google.gson.Gson;
import io.github.resilience4j.core.IntervalFunction;
import io.github.resilience4j.retry.Retry;
import io.github.resilience4j.retry.RetryConfig;
import io.github.resilience4j.retry.RetryRegistry;
import io.vavr.CheckedFunction0;
import it.fattureincloud.sdk.ApiClient;
import it.fattureincloud.sdk.ApiException;
import it.fattureincloud.sdk.Configuration;
import it.fattureincloud.sdk.api.ProductsApi;
import it.fattureincloud.sdk.auth.OAuth;
import it.fattureincloud.sdk.model.ListProductsResponse;
import it.fattureincloud.sdk.model.Product;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;
import java.util.List;

public class Application {
    public static void main(String[] args) throws Throwable {
        // This code should be executed periodically using a cron library or job scheduler.
        // For example: http://www.quartz-scheduler.org/
        syncProducts();
    }

    static void syncProducts() throws Throwable {

        // Here we init the TSE in Cloud SDK
        ApiClient defaultClient = Configuration.getDefaultApiClient();

        // The Access Token is retrieved using the "getToken" method
        OAuth OAuth2AuthenticationCodeFlow =
            (OAuth) defaultClient.getAuthentication("OAuth2AuthenticationCodeFlow");
        OAuth2AuthenticationCodeFlow.setAccessToken(getToken());

        // In this example we're using the Products API
        ProductsApi apiInstance = new ProductsApi(defaultClient);

        // The ID of the controlled company.
        int companyId = 2;

        // Here we setup the exponential backoff config
        RetryConfig config = RetryConfig.custom()
                .maxAttempts(10)
                .retryExceptions(ApiException.class)
                .intervalFunction(IntervalFunction.ofExponentialBackoff(1000, 2))
                .build();

        RetryRegistry registry = RetryRegistry.of(config);
        Retry retry = registry.retry("listProducts", config);

        Retry.EventPublisher publisher = retry.getEventPublisher();
        publisher.onRetry(event -&gt; System.out.println(event.toString()));

        // In this example we suppose to export the data to a JSON Lines file.
        // First, we cancel the content of the destination file
        Files.write(Paths.get("products.jsonl"), ("").getBytes(),
            StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING);

        // List Products
        int perPage = 5;

        // We perform the first request
        ListProductsResponse result = listProductsWithBackoff(companyId, 1, perPage, retry, apiInstance);

        // We use the first response to extract the last page index
        int lastPage = result.getLastPage();

        // We append the products obtained with the first request top the output file
        // Data contains an array of products
        appendProductsToFile(result.getData());

        // For the missing pages (we already requested the first one)
        for (int i = 2; i &lt;= lastPage; i++)
        {
            // We require the page to the API
            result = listProductsWithBackoff(companyId, i, perPage, retry, apiInstance);
            // And append all the retrieved products
            appendProductsToFile(result.getData());

        }
    }

    // Here we wrap the SDK method with an exponential backoff
    // This is to manage the quota exceeded issue
    static ListProductsResponse listProductsWithBackoff(int companyId, int currentPage, int perPage,
            Retry retry, ProductsApi apiInstance) throws Throwable {
                Retry.decorateCheckedSupplier(retry,
                        () -&gt; apiInstance.listProducts(companyId, null, "detailed", null, currentPage, 5));
        return retryingListSuppliers.apply();
    }

        for (Product product : products) {
            String p = new Gson().toJson(product);
            Files.write(Paths.get("products.jsonl"), (p + System.lineSeparator()).getBytes(),
                StandardOpenOption.CREATE, StandardOpenOption.APPEND);
        }
    }

        // This is just a mock: this function should contain the code to retrieve the Access Token
    static String getToken() {
        return "YOUR_TOKEN";
    }
}
</code></pre>
<pre><code class="language-js">// The following dependency is required
// yarn add @fattureincloud/fattureincloud-js-sdk

const fs = require("fs");
const fattureInCloudSdk = require("@fattureincloud/fattureincloud-js-sdk");

// Here we init the TSE in Cloud SDK
// The Access Token is retrieved using the "getToken" method
var defaultClient = fattureInCloudSdk.ApiClient.instance;
var OAuth2AuthenticationCodeFlow =
  defaultClient.authentications["OAuth2AuthenticationCodeFlow"];
OAuth2AuthenticationCodeFlow.accessToken = getToken();

// In this example we're using the Products API
var productsApiInstance = new fattureInCloudSdk.ProductsApi();

// This code should be executed periodically using a cron library or job scheduler.
// For example: https://www.npmjs.com/package/node-cron
main()
  .then()
  .catch((err) =&gt; console.error(err));

async function main() {
  // In this example we suppose to export the data to a JSON Lines file.
  // First, we cancel the content of the destination file
  fs.truncate("./products.jsonl", (err) =&gt; {
    if (err) {
      console.error(err);
      return;
    }
  });

  // Here we define the parameters for the first request.
  let opts = {
    fields: null,
    fieldset: "detailed",
    sort: null,
    page: 1, // We're trying to obtain the first page
    perPage: 5, // Every page will contain at most 5 products
  };
  let companyId = 2; // This is the ID of the company we're working on

  try {
    // We perform the first request
    let result = await listProductsWithBackoff(companyId, opts);
    // We recover the last page index
    let lastPage = result["last_page"];
    // We write the products of this page to the file
    // "data" contains an array of products
    await appendProductsToFile(result["data"]);

    // For all the remaining pages (we already have the first one)
    for (var i = 2; i &lt;= lastPage; i++) {
      // We update the page index
      opts["page"] = i;
      // We require the page at the selected index
      result = await listProductsWithBackoff(companyId, opts);
      // And we write the products to the file
      await appendProductsToFile(result["data"]);
    }
    console.log("products succesfully retrieved and saved in ./products.jsonl");
  } catch (e) {
    console.log(e);
  }
}

// In this function we append the products in the JSON Lines file.
// You can replace this function to perform the operations you need.
// For example, you can build SQL queries or call a third-party API using the retrieved products.
async function appendProductsToFile(products) {
  // For each product in the array
  for (i in products) {
    let product = products[i];
    // We obtain the related JSON and append it to the file as single line
    fs.appendFileSync(
      "./products.jsonl",
      JSON.stringify(product) + "\n",
      (err) =&gt; {
        if (err) {
          console.error(err);
          return;
        }
      }
    );
  }
}

// Here we wrap the SDK method with an exponential backoff
// This is to manage the quota exceeded issue
async function listProductsWithBackoff(companyId, opts) {
  var count = 0;
  const delay = (retryCount) =&gt;
    new Promise((resolve) =&gt; setTimeout(resolve, 2 ** retryCount * 1000));
  const getProd = async (retryCount = 0, lastError = null) =&gt; {
    if (retryCount &gt; 20) throw new Error(lastError);
    try {
      console.log("attempt:", count++, "wait:", 2 ** retryCount * 1000);
      // The actual SDK method is executed here
      return await productsApiInstance.listProducts(companyId, opts);
    } catch (e) {
      await delay(retryCount);
      return getProd(retryCount + 1, e);
    }
  };
  try {
    var res = await getProd();
    return res;
  } catch (e) {
    console.log(e);
  }
}

// This is just a mock: this function should contain the code to retrieve the Access Token
function getToken() {
  return "YOUR_TOKEN";
}
</code></pre>
<pre><code class="language-php">&lt;?php
require("vendor/autoload.php");
// The following dependencies are required
// composer require stechstudio/backoff
// composer require fattureincloud/fattureincloud-php-sdk

use FattureInCloud\Api\ProductsApi;
use FattureInCloud\Configuration;
use GuzzleHttp\Client;
use STS\Backoff\Backoff;

// This code should be executed periodically using a cron library or job scheduler.
// For example: https://github.com/Cron/Cron

// Here we init the TSE in Cloud SDK
// The Access Token is retrieved using the "getToken" method
$config = Configuration::getDefaultConfiguration()-&gt;setAccessToken(getToken());
// In this example we're using the Products API
$productsApiInstance = new ProductsApi(
    new Client(),
    $config
);

// In this example we suppose to export the data to a JSON Lines file.
// First, we cancel the content of the destination file
file_put_contents("./products.jsonl", "");

// This is the ID of the company we're currently managing
$companyId = 2;
// We require the first page using the ListProducts method
$result = listProductsWithBackoff($productsApiInstance, $companyId, 1);
// We extract the index of the last page from the first response
$lastPage = $result["last_page"];
// We append all the products to the destination file
// "data" contains an array of products
appendProductsToFile($result["data"]);

// For all the missing pages (we already have the first one)
for ($i = 2; $i &lt;= $lastPage; $i++) {
    // We require the page at the selected index to the API
    $result = listProductsWithBackoff($productsApiInstance, $companyId, $i);
    // We append this page products to the file
    appendProductsToFile($result["data"]);
}

// In this function we append the products in the JSON Lines file.
// You can replace this function to perform the operations you need.
// For example, you can build SQL queries or call a third-party API using the retrieved products.
function appendProductsToFile($products)
{
    // For each product in the array
    foreach ($products as $product) {
        // We encode it to a JSON string and append it to the file as a single line
        file_put_contents("products.jsonl", json_encode($product) . "\n", FILE_APPEND);
    }
}

// Here we wrap the SDK method with an exponential backoff
// This is to manage the quota exceeded issue
function listProductsWithBackoff($productsApiInstance, $companyId, $currentPage): Object
{
    $backoff = new Backoff(100, 'exponential', 300000, true);
    return $backoff-&gt;run(function () use ($productsApiInstance, $companyId, $currentPage) {
        try {
            // The actual SDK method is executed here
            $result = $productsApiInstance-&gt;listProducts($companyId, null, "detailed", null, $currentPage, 5);
        } catch (Exception $e) {
            var_dump($e);
        }
        return $result;
    });
}

// This is just a mock: this function should contain the code to retrieve the Access Token
function getToken(): String {
  return "YOUR_TOKEN"
}
</code></pre>
<pre><code class="language-py"># The following dependencies are required
# pip install backoff
# pip install fattureincloud-python-sdk
import fattureincloud_python_sdk
from fattureincloud_python_sdk.api import products_api
from fattureincloud_python_sdk.exceptions import ApiException
import backoff
# import collections #needed if you are using python &gt; 3.10
# collections.Callable = collections.abc.Callable #needed if you are using python &gt; 3.10

# Here we setup the exponential backoff config
@backoff.on_exception(backoff.expo, ApiException, max_tries=10)
def list_products_with_backoff(products_api_instance, company_id, current_page, per_page):
    return products_api_instance.list_products(company_id, page=current_page, per_page=per_page)

# In this function we append the products in the JSON Lines file.
# You can replace this function to perform the operations you need.
# For example, you can build SQL queries or call a third-party API using the retrieved products.
def append_products_to_page(products):
    # For each product in the list
    for p in products:
        f = open("products.jsonl", "a")
        # We write the product to the file
        f.write(str(p).replace("\n", ""))
        f.write("\n")
        f.close()

def get_token():
    return "YOUR_TOKEN"

def sync_products():
    # Here we init the TSE in Cloud SDK
    # The Access Token is retrieved using the "GetToken" method
    configuration = fattureincloud_python_sdk.Configuration()
    configuration.access_token = get_token()
    configuration.retries = 0 # Needed to implement custom backoff
    # The ID of the controlled company.
    company_id = 2
    current_page = 1
    per_page = 5

    with fattureincloud_python_sdk.ApiClient(configuration) as api_client:
        # In this example we're using the Products API
        products_api_instance = products_api.ProductsApi(api_client)

        # We perform the first request
        result = list_products_with_backoff(products_api_instance, company_id, current_page, per_page)
        last_page = result.last_page

        # We append the products obtained with the first request to the output file
        # Data contains an array of products
        append_products_to_page(result.data)

        # In this example we suppose to export the data to a JSON Lines file.
        # First, we cancel the content of the destination file
        file = open("products.jsonl","r+")
        file.truncate(0)
        file.close()

        # For the missing pages (we already requested the first one)
        for x in range(2, last_page):
            # We require the page to the API
            result = list_products_with_backoff(products_api_instance, company_id, x, per_page)
            # And append all the retrieved products
            append_products_to_page(result.data)

# This code should be executed periodically using a cron library or job scheduler.
sync_products()
</code></pre>
<pre><code class="language-rb"># The following dependency is required
# gem install fattureincloud_ruby_sdk

require 'fattureincloud_ruby_sdk'
require 'json'

def main()
    FattureInCloud_Ruby_Sdk.configure do |config|
    # Here we init the TSE in Cloud SDK
    # The Access Token is retrieved using the "get_token" method
    config.access_token = get_token()
    end

    # In this example we're using the Products API
    products_api_instance = FattureInCloud_Ruby_Sdk::ProductsAPI.new
    retries = 0
    max_retries = 20

    # This is the ID of the company we're working on
    company_id = 2
    # Here we define the parameters for the first request.
    opts = {
        fields: nil,
        fieldset: "detailed",
        sort: nil,
        page: 1, # We're trying to obtain the first page
        per_page: 5 # Every page will contain at most 5 products
    }
    actual_page = 2

    result = list_products_with_backoff(company_id, opts, products_api_instance)
    last_page = result.last_page

    # In this example we suppose to export the data to a JSON Lines file.
    # First, we cancel the content of the destination file
    File.delete('./products.jsonl') if File.exist?('./products.jsonl')
    append_products_to_file(result.data)

    while actual_page &lt;= last_page do
        opts[:page] = actual_page
        res = list_products_with_backoff(company_id, opts, products_api_instance)
        append_products_to_file(res.data)
        actual_page += 1
    end
end

def list_products_with_backoff(company_id, opts, products_api_instance)
    retries = 0
    begin
        puts "attempt: #{retries}\n"
        products = products_api_instance.list_products(company_id, opts)
        return products
    rescue FattureInCloud_Ruby_Sdk::ApiError =&gt; e
        if retries &lt;= max_retries
            retries += 1
            sleep 2 ** retries
            retry
        else
            raise "Giving up on the server after #{retries} retries. Got error: #{e.message}"
        end
    end
end


def append_products_to_file(products)
    for product in products
        File.write('./products.jsonl', product.to_hash.to_json + "\n", mode: 'a')
    end
end

def get_token()
  return "YOUR_TOKEN"
end

# This code should be executed periodically using a cron library or job scheduler.
main()
</code></pre>
<pre><code class="language-ts">// The following dependency is required
// yarn add @fattureincloud/fattureincloud-ts-sdk

import fs from "fs";
import { Product } from "@fattureincloud/fattureincloud-ts-sdk";

// Here we init the TSE in Cloud SDK
// The Access Token is retrieved using the "getToken" method
import {
  Configuration,
  ProductsApi,
} from "@fattureincloud/fattureincloud-ts-sdk";

const apiConfig = new Configuration({
  accessToken: getToken(),
});

// In this example we're using the Products API
var productsApiInstance = new ProductsApi(apiConfig);

// This code should be executed periodically using a cron library or job scheduler.
// For example: https://www.npmjs.com/package/node-cron
main()
  .then()
  .catch((err) =&gt; console.error(err));

async function main() {
  // In this example we suppose to export the data to a JSON Lines file.
  // First, we cancel the content of the destination file
  fs.truncate("./products.jsonl", (err) =&gt; {
    if (err) {
      console.error(err);
      return;
    }
  });

  // Here we define the parameters for the first request.
  let page = 1;

  let companyId = 16; // This is the ID of the company we're working on

  try {
    // We perform the first request
    let result = await listProductsWithBackoff(companyId, page);
    // We recover the last page index
    let lastPage = result["last_page"];
    // We write the products of this page to the file
    // "data" contains an array of products
    await appendProductsToFile(result.data);

    // For all the remaining pages (we already have the first one)
    for (var i = 2; i &lt;= lastPage; i++) {
      // We update the page index
      page = i;
      // We require the page at the selected index
      result = await listProductsWithBackoff(companyId, page);
      // And we write the products to the file
      await appendProductsToFile(result.data);
    }
    console.log("products succesfully retrieved and saved in ./products.jsonl");
  } catch (e) {
    console.log(e);
  }
}

// In this function we append the products in the JSON Lines file.
// You can replace this function to perform the operations you need.
// For example, you can build SQL queries or call a third-party API using the retrieved products.
  // For each product in the array
  for (var i in products) {
    let product = products[i];
    // We obtain the related JSON and append it to the file as single line
    fs.appendFileSync("./products.jsonl", JSON.stringify(product) + "\n");
  }
}

// Here we wrap the SDK method with an exponential backoff
// This is to manage the quota exceeded issue
async function listProductsWithBackoff(companyId: number, page: number) {
  var count = 0;
  const delay = (retryCount: number) =&gt;
    new Promise((resolve) =&gt; setTimeout(resolve, 2 ** retryCount * 1000));
  const getProd: any = async (retryCount = 0, lastError?: string) =&gt; {
    if (retryCount &gt; 20) throw new Error(lastError);
    try {
      console.log("attempt:", count++, "wait:", 2 ** retryCount * 1000);
      // The actual SDK method is executed here
      return await (
        await productsApiInstance.listProducts(
          companyId,
          undefined,
          "detailed",
          undefined,
          page
        )
      ).data;
    } catch (e: any) {
      await delay(retryCount);
      return getProd(++retryCount, e.message);
    }
  };
  try {
    var res = await getProd();
    return res;
  } catch (e) {
    console.log(e);
  }
}

// This is just a mock: this function should contain the code to retrieve the Access Token
function getToken() {
  return "YOUR_TOKEN";
}
</code></pre>
<h2 id="additional-resources"><img alt="📚" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/1f4da.png" title=":books:"/>  Additional resources</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Exponential_backoff">Exponential Backoff</a></li>
<li><a href="https://en.wikipedia.org/wiki/Zero-based_numbering">Zero-based numbering</a></li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["icons", "navigation.collapsible"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
<script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>